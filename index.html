
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Zian's Growth Hub</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fffaf9;
      --card:#fff;
      --muted:#8b7d7a;
      --accent:#f7c6d1; /* sakura pink */
      --accent-2:#f5e9e6; /* soft beige */
      --shadow: 0 10px 30px rgba(18,16,15,0.06);
      --glass: rgba(255,255,255,0.6);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Inter', 'Noto Sans JP', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: linear-gradient(180deg, var(--bg) 0%, #fffaf6 100%);
      color:#3b2f2d;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:26px;
      display:flex;
      justify-content:center;
    }
    .wrap{width:100%;max-width:1150px}
    header{display:flex;align-items:center;gap:18px;margin-bottom:18px}
    .logo{width:72px;height:72px;border-radius:18px;background:linear-gradient(135deg,var(--accent),#ffeef0);display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow)}
    .logo h1{font-family:'Noto Sans JP';font-size:26px;margin:0;color:#7b4b58}
    .title{flex:1}
    .title h2{margin:0;font-size:22px;font-weight:700}
    .title p{margin:6px 0 0;color:var(--muted);font-size:14px}

    main{display:grid;grid-template-columns:1fr 420px;gap:20px}
    @media (max-width:980px){main{grid-template-columns:1fr}}

    .panel{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
    .intro{display:flex;gap:14px;align-items:flex-start}
    .avatar{width:72px;height:72px;border-radius:12px;background:linear-gradient(180deg,#fff, #fffaf6);display:flex;align-items:center;justify-content:center;border:1px solid rgba(0,0,0,0.03)}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px}

    .card-compact{background:var(--accent-2);padding:10px;border-radius:12px}
    .small{font-size:13px;color:var(--muted)}

    /* Budget */
    .budget-header{display:flex;align-items:center;gap:12px}
    .salary-input{padding:8px 10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);width:140px}
    .budget-list{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .budget-item{display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;background:linear-gradient(180deg,#fff,#fffaf6);border:1px solid rgba(0,0,0,0.03)}
    .budget-left{width:40%}
    .budget-right{flex:1}
    .budget-meta{font-size:13px;color:var(--muted)}

    .slider{height:14px;background:#f3f1f0;border-radius:12px;position:relative}
    .slider-fill{height:100%;background:linear-gradient(90deg,var(--accent),#ffdbe6);width:0;border-radius:12px}
    .handle{position:absolute;right:0;top:50%;transform:translate(50%,-50%);width:18px;height:18px;border-radius:50%;background:#fff;border:2px solid #f7c6d1;box-shadow:0 6px 12px rgba(0,0,0,0.06);cursor:pointer}

    .controls{display:flex;gap:8px;align-items:center;margin-top:10px}
    .btn{display:inline-block;padding:8px 12px;border-radius:10px;background:var(--accent);color:#6b2f38;text-decoration:none;font-weight:700;border:none;cursor:pointer}
    .btn-ghost{background:transparent;border:1px solid rgba(0,0,0,0.06)}

    /* checklist month nav */
    .month-nav{display:flex;gap:8px;align-items:center;margin-top:8px}
    .month-label{font-weight:700}

    /* timeline */
    .timeline{display:flex;flex-direction:column;gap:10px}
    .year-row{display:flex;gap:12px;align-items:flex-start}
    .year-col{width:68px;font-weight:700;color:#7b4b58}
    .year-card{flex:1;padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff,#fffaf6);border:1px solid rgba(0,0,0,0.03)}
    .project-list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .project-card{display:flex;justify-content:space-between;gap:10px;padding:10px;border-radius:10px;background:#fff;border:1px solid rgba(0,0,0,0.04)}
    .project-card .meta{font-size:13px;color:var(--muted)}

    /* dream board */
    .moodboard{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:8px}
    .moodboard img{width:100%;border-radius:10px;object-fit:cover;height:150px;border:1px solid rgba(0,0,0,0.04)}

    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

    .small-muted{font-size:12px;color:var(--muted)}

    .hidden{display:none}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"><h1>Z</h1></div>
      <div class="title">
        <h2>Zian's Growth Hub</h2>
        <p>Track â€¢ Grow â€¢ Dream â€” Growing in data, language, and life.</p>
      </div>
      <div style="text-align:right">
        <div class="small">Interactive dashboard â€¢ Light theme</div>
      </div>
    </header>

    <main>
      <section>
        <div class="panel intro">
          <div class="avatar"><div style="font-weight:700;color:#995d67">ZZ</div></div>
          <div style="flex:1">
            <h3>Welcome back, Zian ðŸŒ¸</h3>
            <p class="small">Enter your salary, tick your monthly checklist, drag the sliders, and update your projects. Data is saved locally in your browser.</p>
            <div class="grid-2">
              <div class="card-compact">
                <div class="small">Quick start</div>
                <div style="font-weight:700">Enter salary â†’ Adjust sliders â†’ Save per month</div>
              </div>
              <div class="card-compact">
                <div class="small">Reminder</div>
                <div style="font-weight:700">Autopay your credit card in full each month</div>
              </div>
            </div>
          </div>
        </div>

        <div style="height:14px"></div>

        <div class="panel">
          <div class="budget-header">
            <div style="flex:1">
              <h4 style="margin:0">Budget Tracker</h4>
              <div class="small">Enter salary to calculate ideal RM targets for categories.</div>
            </div>
            <div style="text-align:right">
              <input id="salary" class="salary-input" type="number" min="0" placeholder="Enter salary" />
              <div class="small-muted">Default suggestions: Savings 30%, Needs 40%, Wants 10%, Learning 10%, Credit 10%</div>
            </div>
          </div>

          <div class="month-nav" style="margin-top:8px">
            <button class="btn" id="prev-month">â—€</button>
            <div class="month-label" id="month-label">Month</div>
            <button class="btn" id="next-month">â–¶</button>
            <div style="flex:1"></div>
            <button class="btn btn-ghost" id="add-category">+ Add Category</button>
          </div>

          <div class="budget-list" id="budget-list" style="margin-top:12px">
            <!-- budget items injected here -->
          </div>

          <div class="controls">
            <div class="small-muted" id="budget-summary">Total tracked: RM 0 / RM 0</div>
            <div style="flex:1"></div>
            <button class="btn btn-ghost" id="reset-data">Reset All Data</button>
          </div>
        </div>

        <div style="height:14px"></div>

        <div class="panel">
          <h4 style="margin:0">Career & Projects (2026â€“2030)</h4>
          <div class="small">Add projects under each year. Drag to reorder is not implemented (simple add/edit/delete).</div>

          <div class="timeline" id="timeline">
            <!-- years injected here -->
          </div>
        </div>

      </section>

      <aside>
        <div class="widget panel">
          <h4 style="margin:0">Progress Overview</h4>
          <div class="small">Drag the sliders in Budget Tracker to update these progress bars.</div>
          <div style="height:10px"></div>
          <div class="panel" style="padding:10px">
            <div class="small">Japan Trip <span id="ov-amt-japan">RM 0</span></div>
            <div class="slider" style="margin:6px 0"><div class="slider-fill" id="ov-fill-japan" style="width:0%"></div></div>
            <div class="small">Driving License <span id="ov-amt-license">RM 0</span></div>
            <div class="slider" style="margin:6px 0"><div class="slider-fill" id="ov-fill-license" style="width:0%"></div></div>
            <div class="small">Apartment / EV <span id="ov-amt-ev">RM 0</span></div>
            <div class="slider" style="margin:6px 0"><div class="slider-fill" id="ov-fill-ev" style="width:0%"></div></div>
            <div class="small">JLPT Progress <span id="ov-amt-jlpt">0%</span></div>
            <div class="slider" style="margin:6px 0"><div class="slider-fill" id="ov-fill-jlpt" style="width:0%"></div></div>
          </div>
        </div>

        <div class="widget panel">
          <h4 style="margin:0">Dream Board</h4>
          <div class="moodboard">
            <div><a data-pin-do="embedPin" href="https://www.pinterest.com/pin/438819557471608650/">Apartment pin</a></div>
            <div><img src="https://i.pinimg.com/1200x/3e/62/f2/3e62f23e3ce7c5bf3cff0d55c931ecd5.jpg" alt="Ora Cat EV"></div>
          </div>
        </div>

      </aside>
    </main>

    <footer>
      Built for you â€¢ All data stored locally â€¢ To publish, upload this file as index.html to GitHub Pages root.
    </footer>
  </div>

  <script async defer src="https://assets.pinterest.com/js/pinit.js"></script>
  <script>
    // --- Utility ---
    const defaultSalary = 3000
    function monthKeyFromDate(d){ const y=d.getFullYear(); const m=String(d.getMonth()+1).padStart(2,'0'); return y+'-'+m }
    function formatRM(x){ return 'RM ' + Number(x).toLocaleString('en-MY') }

    // --- Default budget categories and ratio ---
    const defaultCategories = [
      {key:'savings', label:'Savings', pct:30},
      {key:'needs', label:'Needs', pct:40},
      {key:'wants', label:'Wants', pct:10},
      {key:'learning', label:'Learning / Skill', pct:10},
      {key:'credit', label:'Credit Card Payment', pct:10}
    ]

    // --- Load or init state ---
    let today = new Date()
    const savedView = localStorage.getItem('zian-last-view')
    if (savedView) { today = new Date(savedView + '-01') }

    function saveSalary(val){ localStorage.setItem('zian-salary', String(val)) }
    function loadSalary(){ return Number(localStorage.getItem('zian-salary') || defaultSalary) }

    // Data per month stored as zian-budget-YYYY-MM
    function loadMonthData(monthKey){
      const raw = localStorage.getItem('zian-budget-' + monthKey)
      if (raw) return JSON.parse(raw)
      // initialize with categories (from custom stored or default)
      const customCats = JSON.parse(localStorage.getItem('zian-custom-cats') || 'null')
      const cats = customCats || defaultCategories
      const salary = loadSalary()
      const data = { salary: salary, categories: cats.map(c=>({ ...c, amount: Math.round(salary * (c.pct/100)), value:0 })) }
      return data
    }

    function saveMonthData(monthKey, data){ localStorage.setItem('zian-budget-' + monthKey, JSON.stringify(data)) ; updateIndex(monthKey) }

    function updateIndex(monthKey){ const idx = JSON.parse(localStorage.getItem('zian-budget-index')||'[]'); if (!idx.includes(monthKey)){ idx.unshift(monthKey); localStorage.setItem('zian-budget-index', JSON.stringify(idx.slice(0,36))); } localStorage.setItem('zian-last-view', monthKey) }

    // --- Render functions ---
    function renderMonthLabel(){ const opts={year:'numeric', month:'long'}; document.getElementById('month-label').textContent = today.toLocaleDateString(undefined, opts) }

    function renderBudgetList(){ renderMonthLabel(); const key = monthKeyFromDate(today); const container = document.getElementById('budget-list'); container.innerHTML='';
      const data = loadMonthData(key)
      // ensure salary shown
      document.getElementById('salary').value = data.salary
      let totalTracked = 0
      data.categories.forEach((cat, idx)=>{
        const item = document.createElement('div'); item.className='budget-item';
        const left = document.createElement('div'); left.className='budget-left'; left.innerHTML = `<div style="font-weight:700">${cat.label}</div><div class='budget-meta'>Ideal: ${cat.pct}% â€¢ ${formatRM(Math.round(data.salary * (cat.pct/100)))}</div>`
        const right = document.createElement('div'); right.className='budget-right'
        // slider
        const slider = document.createElement('div'); slider.className='slider';
        const fill = document.createElement('div'); fill.className='slider-fill'; fill.style.width = Math.min(100, Math.round(cat.value / Math.max(1, Math.round(data.salary * (cat.pct/100))) * 100)) + '%'
        const handle = document.createElement('div'); handle.className='handle'
        slider.appendChild(fill); slider.appendChild(handle)

        // amount display
        const amt = document.createElement('div'); amt.style.marginTop='8px'; amt.style.display='flex'; amt.style.justifyContent='space-between'; amt.innerHTML = `<div class='small-muted'>${formatRM(cat.value)} â€¢ ${Math.round((cat.value/Math.max(1, Math.round(data.salary * (cat.pct/100))))*100)}%</div><div class='small-muted'>Goal ${formatRM(Math.round(data.salary * (cat.pct/100)))}</div>`

        // controls
        const controls = document.createElement('div'); controls.style.marginTop='8px'; controls.style.display='flex'; controls.style.gap='8px';
        const inputNum = document.createElement('input'); inputNum.type='number'; inputNum.value = cat.value; inputNum.style.width='120px'; inputNum.style.padding='6px'; inputNum.style.border='1px solid rgba(0,0,0,0.06)'; inputNum.style.borderRadius='8px'
        const delBtn = document.createElement('button'); delBtn.className='btn btn-ghost'; delBtn.textContent='Delete';
        controls.appendChild(inputNum); controls.appendChild(delBtn)

        right.appendChild(slider); right.appendChild(amt); right.appendChild(controls)

        item.appendChild(left); item.appendChild(right); container.appendChild(item)

        totalTracked += cat.value

        // slider drag logic
        let dragging = false
        function updateFromClientX(clientX){
          const rect = slider.getBoundingClientRect(); let x = clientX - rect.left; x = Math.max(0, Math.min(rect.width, x)); const pct = x/rect.width; const goal = Math.max(1, Math.round(data.salary * (cat.pct/100))); const newVal = Math.round(goal * pct); cat.value = newVal; fill.style.width = Math.round(pct*100) + '%'; amt.innerHTML = `<div class='small-muted'>${formatRM(cat.value)} â€¢ ${Math.round((cat.value/goal)*100)}%</div><div class='small-muted'>Goal ${formatRM(goal)}</div>`; inputNum.value = cat.value; saveMonthData(key, data); renderOverviewFromData(); renderSummary(key)
        }
        handle.addEventListener('mousedown', (e)=>{ dragging=true; e.preventDefault(); })
        window.addEventListener('mouseup', ()=>{ dragging=false })
        window.addEventListener('mousemove', (e)=>{ if (dragging) updateFromClientX(e.clientX) })
        // touch
        handle.addEventListener('touchstart', ()=>{ dragging=true })
        window.addEventListener('touchend', ()=>{ dragging=false })
        window.addEventListener('touchmove', (e)=>{ if (dragging) updateFromClientX(e.touches[0].clientX) })

        // numeric input change
        inputNum.addEventListener('change', ()=>{
          const goal = Math.max(1, Math.round(data.salary * (cat.pct/100))); cat.value = Math.max(0, Math.round(Number(inputNum.value)||0)); const pct = Math.min(100, Math.round(cat.value/goal*100)); fill.style.width = pct + '%'; amt.innerHTML = `<div class='small-muted'>${formatRM(cat.value)} â€¢ ${Math.round((cat.value/goal)*100)}%</div><div class='small-muted'>Goal ${formatRM(goal)}</div>`; saveMonthData(key, data); renderOverviewFromData(); renderSummary(key)
        })

        // delete category
        delBtn.addEventListener('click', ()=>{
          if (!confirm('Delete this category for this month? You can recreate it later.')) return
          data.categories.splice(idx,1); saveMonthData(key,data); renderBudgetList(); renderSummary(key); renderOverviewFromData()
        })
      })

      renderSummary(key)
    }

    function renderSummary(monthKey){ const data = loadMonthData(monthKey); const totalGoal = data.categories.reduce((s,c)=>s+Math.max(1,Math.round(data.salary*(c.pct/100))),0); const totalTracked = data.categories.reduce((s,c)=>s+c.value,0); document.getElementById('budget-summary').textContent = `Total tracked: ${formatRM(totalTracked)} / ${formatRM(totalGoal)}` }

    // add category
    document.getElementById('add-category').addEventListener('click', ()=>{
      const label = prompt('Category name (e.g. Invest, Side hustle):')
      if (!label) return
      const pct = Number(prompt('Ideal percentage for this category (whole number, e.g. 5)')||10)
      // store as custom category template
      const custom = JSON.parse(localStorage.getItem('zian-custom-cats')||'null') || defaultCategories
      custom.push({ key: label.toLowerCase().replace(/\s+/g,'-')+'-'+Date.now(), label: label, pct: pct })
      localStorage.setItem('zian-custom-cats', JSON.stringify(custom))
      // refresh current month data
      const key = monthKeyFromDate(today)
      const data = loadMonthData(key)
      data.categories.push({ key: custom[custom.length-1].key, label: label, pct: pct, amount: Math.round(data.salary*(pct/100)), value:0 })
      saveMonthData(key,data); renderBudgetList()
    })

    // salary input
    document.getElementById('salary').addEventListener('change', ()=>{
      const val = Math.max(0, Number(document.getElementById('salary').value)||defaultSalary); saveSalary(val)
      // update this month's goals
      const key = monthKeyFromDate(today); const data = loadMonthData(key); data.salary = val; data.categories = data.categories.map(c=>({ ...c, amount: Math.round(val*(c.pct/100)) })); saveMonthData(key,data); renderBudgetList(); renderOverviewFromData()
    })

    // month navigation
    document.getElementById('prev-month').addEventListener('click', ()=>{ today.setMonth(today.getMonth()-1); renderBudgetList(); })
    document.getElementById('next-month').addEventListener('click', ()=>{ today.setMonth(today.getMonth()+1); renderBudgetList(); })

    // render overview based on stored 'funds' keys if available
    function renderOverviewFromData(){
      const monthKey = monthKeyFromDate(today); const data = loadMonthData(monthKey)
      // set overview fills for specific goals if categories exist (try to map)
      const findVal = (label)=>{ const c = data.categories.find(x=>x.key.includes(label) || x.label.toLowerCase().includes(label)); return c? c.value:0 }
      const japan = findVal('japan') || 0; const license = findVal('license') || 0; const ev = findVal('ev') || 0; const jlpt = Math.round((findVal('learning') / Math.max(1, Math.round(data.salary*( (data.categories.find(x=>x.key==='learning')||{pct:10}).pct/100))) )*100) || 0
      // set text
      document.getElementById('ov-amt-japan').textContent = formatRM(japan)
      document.getElementById('ov-amt-license').textContent = formatRM(license)
      document.getElementById('ov-amt-ev').textContent = formatRM(ev)
      document.getElementById('ov-amt-jlpt').textContent = jlpt + '%'
      document.getElementById('ov-fill-japan').style.width = Math.min(100, Math.round(japan/Math.max(1, loadSalary()*0.3) * 100)) + '%'
      document.getElementById('ov-fill-license').style.width = Math.min(100, Math.round(license/Math.max(1, 2800) * 100)) + '%'
      document.getElementById('ov-fill-ev').style.width = Math.min(100, Math.round(ev/Math.max(1, 100000) * 100)) + '%'
      document.getElementById('ov-fill-jlpt').style.width = Math.min(100, jlpt) + '%'
    }

    // reset all data
    document.getElementById('reset-data').addEventListener('click', ()=>{
      if (!confirm('Reset ALL saved data in this browser? This cannot be undone.')) return
      Object.keys(localStorage).forEach(k=>{ if (k.startsWith('zian-')) localStorage.removeItem(k) })
      location.reload()
    })

    // init rendering
    renderBudgetList(); renderOverviewFromData()

    // --- Timeline / Projects logic (2026-2030) ---
    const years = [2026,2027,2028,2029,2030]
    function loadProjects(){ return JSON.parse(localStorage.getItem('zian-projects')||'{}') }
    function saveProjects(obj){ localStorage.setItem('zian-projects', JSON.stringify(obj)) }

    function renderTimeline(){ const container = document.getElementById('timeline'); container.innerHTML=''; const data = loadProjects(); years.forEach(y=>{
        const row = document.createElement('div'); row.className='year-row'
        const col = document.createElement('div'); col.className='year-col'; col.textContent = y
        const card = document.createElement('div'); card.className='year-card'
        const addBtn = document.createElement('button'); addBtn.className='btn'; addBtn.textContent = '+ Add'; addBtn.style.float='right'
        addBtn.addEventListener('click', ()=>{ const title = prompt('Project title'); if (!title) return; const note = prompt('Short note'); const obj = loadProjects(); obj[y] = obj[y]||[]; obj[y].push({id:Date.now(),title:title,note:note}); saveProjects(obj); renderTimeline(); })
        const head = document.createElement('div'); head.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center"><div style='font-weight:700'>Goals & Projects</div></div>`
        card.appendChild(head)
        const list = document.createElement('div'); list.className='project-list'
        (data[y]||[]).forEach(p=>{
          const pc = document.createElement('div'); pc.className='project-card'
          const left = document.createElement('div'); left.innerHTML = `<div style='font-weight:700'>${p.title}</div><div class='meta'>${p.note||''}</div>`
          const right = document.createElement('div'); right.style.display='flex'; right.style.gap='8px'; const edit = document.createElement('button'); edit.className='btn btn-ghost'; edit.textContent='Edit'; const del = document.createElement('button'); del.className='btn btn-ghost'; del.textContent='Delete'
          edit.addEventListener('click', ()=>{ const newTitle = prompt('Edit title', p.title); if (!newTitle) return; const newNote = prompt('Edit note', p.note); const obj = loadProjects(); obj[y] = obj[y].map(it=>it.id===p.id?{...it,title:newTitle,note:newNote}:it); saveProjects(obj); renderTimeline(); })
          del.addEventListener('click', ()=>{ if (!confirm('Delete this project?')) return; const obj = loadProjects(); obj[y] = (obj[y]||[]).filter(it=>it.id!==p.id); saveProjects(obj); renderTimeline(); })
          right.appendChild(edit); right.appendChild(del); pc.appendChild(left); pc.appendChild(right); list.appendChild(pc)
        })
        card.appendChild(list)
        row.appendChild(col); row.appendChild(card); container.appendChild(row)
    }) }

    renderTimeline()

    // when page loads, ensure we have last-view remembered
    window.addEventListener('load', ()=>{ const last = localStorage.getItem('zian-last-view'); if (last){ today = new Date(last + '-01') } renderBudgetList(); renderTimeline(); renderOverviewFromData() })

  </script>
</body>
</html>
